<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    const product1 = { id: 1, name: 'sausage', count: 1 }
    const product2 = { id: 2, name: 'bread', count: 1 }

    function Cart() {
      this.products = []
    }
    Cart.prototype.add = function (product) {
      if (this.products.find(item => item.name === product.name)) return
      this.products.push(product)
    }
    Cart.prototype.increase = function (product) {
      this.products.find(item => item.name === product.name).count++
    }
    Cart.prototype.decrease = function (product) {
      const index = this.products.findIndex(item => item.name === product.name)
      if (this.products[index].count === 1) {
        this.products.splice(index, 1)
        return
      }
      this.products[index].count--
    }

    function UpgradedCart() {
      this.products = []
    }
    UpgradedCart.prototype.addProduct = function (product) {
      if (this.products.find(item => item.id === product.id)) return
      this.products.push(product)
    }
    UpgradedCart.prototype.increaseAmount = function (product) {
      this.products = this.products.map(item => {
        if (item.id === product.id) {
          item.count++
        }
        return item
      })
    }
    UpgradedCart.prototype.decreaseAmount = function (product) {
      this.products = this.products.map(item => {
        if (item.id === product.id) {
          item.count--
        }
        return item
      }).filter(item => item.count > 0)
    }

    const cart1 = new Cart()
    // cart1.add(product1)
    // cart1.add(product2)
    // cart1.increase(product1)
    // cart1.decrease(product1)
    // cart1.decrease(product1)

    cart2 = new UpgradedCart()
    cart2.addProduct(product1)
    cart2.addProduct(product2)
    cart2.addProduct(product2)
    cart2.increaseAmount(product2)
    cart2.decreaseAmount(product2)
    cart2.decreaseAmount(product2)
    console.log(cart2)
  </script>
</head>

<body>

</body>

</html>